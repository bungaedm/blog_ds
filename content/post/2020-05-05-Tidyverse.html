---
title: "[DataCamp]Working with Data in the Tidyverse"
author: "SonJiwoo"
date: 2020-05-05T20:13:14-05:00
categories: ["R"]
tags: ["R Markdown", "plot", "regression"]
---



<pre class="r"><code>library(dplyr)
## 
## 다음의 패키지를 부착합니다: &#39;dplyr&#39;
## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag
## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union
library(skimr)
## Warning: 패키지 &#39;skimr&#39;는 R 버전 3.6.3에서 작성되었습니다
library(readr)
library(janitor)
## Warning: 패키지 &#39;janitor&#39;는 R 버전 3.6.3에서 작성되었습니다
## 
## 다음의 패키지를 부착합니다: &#39;janitor&#39;
## The following objects are masked from &#39;package:stats&#39;:
## 
##     chisq.test, fisher.test
library(tidyr)

by_vs_am &lt;- mtcars %&gt;% group_by(vs, am)
by_vs &lt;- by_vs_am %&gt;% summarise(n = n())
by_vs
## # A tibble: 4 x 3
## # Groups:   vs [2]
##      vs    am     n
##   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;
## 1     0     0    12
## 2     0     1     6
## 3     1     0     7
## 4     1     1     7
by_vs %&gt;% summarise(n = sum(n))
## # A tibble: 2 x 2
##      vs     n
##   &lt;dbl&gt; &lt;int&gt;
## 1     0    18
## 2     1    14

by_vs %&gt;%
  ungroup() %&gt;%
  summarise(n = sum(n))
## # A tibble: 1 x 1
##       n
##   &lt;int&gt;
## 1    32

by_vs %&gt;%
  ungroup()
## # A tibble: 4 x 3
##      vs    am     n
##   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;
## 1     0     0    12
## 2     0     1     6
## 3     1     0     7
## 4     1     1     7
by_vs
## # A tibble: 4 x 3
## # Groups:   vs [2]
##      vs    am     n
##   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;
## 1     0     0    12
## 2     0     1     6
## 3     1     0     7
## 4     1     1     7



stocks &lt;- data.frame(
  time = as.Date(&#39;2009-01-01&#39;) + 0:9,
  X = rnorm(10, 0, 1),
  Y = rnorm(10, 0, 2),
  Z = rnorm(10, 0, 4)
)
stocks
##          time          X          Y          Z
## 1  2009-01-01  1.4221885  0.9833842 -3.2496521
## 2  2009-01-02  1.3330348  1.0170660 -1.1708966
## 3  2009-01-03  0.6458230  2.7110810 -5.2643660
## 4  2009-01-04  0.3271481 -0.4892910 -4.3226096
## 5  2009-01-05  1.5469813  2.3386287  9.2133193
## 6  2009-01-06  0.1457430  1.6923643 -0.2390803
## 7  2009-01-07 -0.5723857  0.1546855  1.4496643
## 8  2009-01-08 -0.7020283 -1.6170780  7.9214603
## 9  2009-01-09 -1.4134265  3.1851862 -1.5063328
## 10 2009-01-10  1.4844669  0.3218779 -0.7262833
stocksm &lt;- stocks %&gt;% gather(stock, price, -time)
stocksm
##          time stock      price
## 1  2009-01-01     X  1.4221885
## 2  2009-01-02     X  1.3330348
## 3  2009-01-03     X  0.6458230
## 4  2009-01-04     X  0.3271481
## 5  2009-01-05     X  1.5469813
## 6  2009-01-06     X  0.1457430
## 7  2009-01-07     X -0.5723857
## 8  2009-01-08     X -0.7020283
## 9  2009-01-09     X -1.4134265
## 10 2009-01-10     X  1.4844669
## 11 2009-01-01     Y  0.9833842
## 12 2009-01-02     Y  1.0170660
## 13 2009-01-03     Y  2.7110810
## 14 2009-01-04     Y -0.4892910
## 15 2009-01-05     Y  2.3386287
## 16 2009-01-06     Y  1.6923643
## 17 2009-01-07     Y  0.1546855
## 18 2009-01-08     Y -1.6170780
## 19 2009-01-09     Y  3.1851862
## 20 2009-01-10     Y  0.3218779
## 21 2009-01-01     Z -3.2496521
## 22 2009-01-02     Z -1.1708966
## 23 2009-01-03     Z -5.2643660
## 24 2009-01-04     Z -4.3226096
## 25 2009-01-05     Z  9.2133193
## 26 2009-01-06     Z -0.2390803
## 27 2009-01-07     Z  1.4496643
## 28 2009-01-08     Z  7.9214603
## 29 2009-01-09     Z -1.5063328
## 30 2009-01-10     Z -0.7262833
stocksm %&gt;% spread(stock, price)
##          time          X          Y          Z
## 1  2009-01-01  1.4221885  0.9833842 -3.2496521
## 2  2009-01-02  1.3330348  1.0170660 -1.1708966
## 3  2009-01-03  0.6458230  2.7110810 -5.2643660
## 4  2009-01-04  0.3271481 -0.4892910 -4.3226096
## 5  2009-01-05  1.5469813  2.3386287  9.2133193
## 6  2009-01-06  0.1457430  1.6923643 -0.2390803
## 7  2009-01-07 -0.5723857  0.1546855  1.4496643
## 8  2009-01-08 -0.7020283 -1.6170780  7.9214603
## 9  2009-01-09 -1.4134265  3.1851862 -1.5063328
## 10 2009-01-10  1.4844669  0.3218779 -0.7262833
stocksm %&gt;% spread(time, price)
##   stock 2009-01-01 2009-01-02 2009-01-03 2009-01-04 2009-01-05 2009-01-06
## 1     X  1.4221885   1.333035   0.645823  0.3271481   1.546981  0.1457430
## 2     Y  0.9833842   1.017066   2.711081 -0.4892910   2.338629  1.6923643
## 3     Z -3.2496521  -1.170897  -5.264366 -4.3226096   9.213319 -0.2390803
##   2009-01-07 2009-01-08 2009-01-09 2009-01-10
## 1 -0.5723857 -0.7020283  -1.413426  1.4844669
## 2  0.1546855 -1.6170780   3.185186  0.3218779
## 3  1.4496643  7.9214603  -1.506333 -0.7262833</code></pre>
