---
title: "[DataCamp]Working with Data in the Tidyverse"
date: 2020-05-05T06:49:14-05:00
output: github_document
---



<pre class="r"><code>library(dplyr)</code></pre>
<pre><code>## 
## 다음의 패키지를 부착합니다: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<pre class="r"><code>library(skimr)</code></pre>
<pre><code>## Warning: 패키지 &#39;skimr&#39;는 R 버전 3.6.3에서 작성되었습니다</code></pre>
<pre class="r"><code>library(readr)
library(janitor)</code></pre>
<pre><code>## Warning: 패키지 &#39;janitor&#39;는 R 버전 3.6.3에서 작성되었습니다</code></pre>
<pre><code>## 
## 다음의 패키지를 부착합니다: &#39;janitor&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     chisq.test, fisher.test</code></pre>
<pre class="r"><code>library(tidyr)

by_vs_am &lt;- mtcars %&gt;% group_by(vs, am)
by_vs &lt;- by_vs_am %&gt;% summarise(n = n())
by_vs</code></pre>
<pre><code>## # A tibble: 4 x 3
## # Groups:   vs [2]
##      vs    am     n
##   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;
## 1     0     0    12
## 2     0     1     6
## 3     1     0     7
## 4     1     1     7</code></pre>
<pre class="r"><code>by_vs %&gt;% summarise(n = sum(n))</code></pre>
<pre><code>## # A tibble: 2 x 2
##      vs     n
##   &lt;dbl&gt; &lt;int&gt;
## 1     0    18
## 2     1    14</code></pre>
<pre class="r"><code>by_vs %&gt;%
  ungroup() %&gt;%
  summarise(n = sum(n))</code></pre>
<pre><code>## # A tibble: 1 x 1
##       n
##   &lt;int&gt;
## 1    32</code></pre>
<pre class="r"><code>by_vs %&gt;%
  ungroup()</code></pre>
<pre><code>## # A tibble: 4 x 3
##      vs    am     n
##   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;
## 1     0     0    12
## 2     0     1     6
## 3     1     0     7
## 4     1     1     7</code></pre>
<pre class="r"><code>by_vs</code></pre>
<pre><code>## # A tibble: 4 x 3
## # Groups:   vs [2]
##      vs    am     n
##   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;
## 1     0     0    12
## 2     0     1     6
## 3     1     0     7
## 4     1     1     7</code></pre>
<pre class="r"><code>stocks &lt;- data.frame(
  time = as.Date(&#39;2009-01-01&#39;) + 0:9,
  X = rnorm(10, 0, 1),
  Y = rnorm(10, 0, 2),
  Z = rnorm(10, 0, 4)
)
stocks</code></pre>
<pre><code>##          time          X           Y          Z
## 1  2009-01-01 -0.4231908 -1.73158045 -0.8833931
## 2  2009-01-02 -2.0057770 -1.48372159  6.9398273
## 3  2009-01-03  0.7254124 -2.63763031 -1.3333389
## 4  2009-01-04  0.6735256  3.63508177 -6.5230641
## 5  2009-01-05  1.0295169 -1.80531040 -2.6559102
## 6  2009-01-06  0.1751992  2.56019637  2.4273321
## 7  2009-01-07 -0.7310418 -1.29824900 -3.2823763
## 8  2009-01-08  1.0844626 -0.01699599  2.2025118
## 9  2009-01-09  1.1826379  0.33536337 -3.7886954
## 10 2009-01-10 -1.4777118  2.51063250  4.8425257</code></pre>
<pre class="r"><code>stocksm &lt;- stocks %&gt;% gather(stock, price, -time)
stocksm</code></pre>
<pre><code>##          time stock       price
## 1  2009-01-01     X -0.42319077
## 2  2009-01-02     X -2.00577696
## 3  2009-01-03     X  0.72541240
## 4  2009-01-04     X  0.67352560
## 5  2009-01-05     X  1.02951694
## 6  2009-01-06     X  0.17519917
## 7  2009-01-07     X -0.73104182
## 8  2009-01-08     X  1.08446260
## 9  2009-01-09     X  1.18263795
## 10 2009-01-10     X -1.47771179
## 11 2009-01-01     Y -1.73158045
## 12 2009-01-02     Y -1.48372159
## 13 2009-01-03     Y -2.63763031
## 14 2009-01-04     Y  3.63508177
## 15 2009-01-05     Y -1.80531040
## 16 2009-01-06     Y  2.56019637
## 17 2009-01-07     Y -1.29824900
## 18 2009-01-08     Y -0.01699599
## 19 2009-01-09     Y  0.33536337
## 20 2009-01-10     Y  2.51063250
## 21 2009-01-01     Z -0.88339308
## 22 2009-01-02     Z  6.93982728
## 23 2009-01-03     Z -1.33333886
## 24 2009-01-04     Z -6.52306408
## 25 2009-01-05     Z -2.65591022
## 26 2009-01-06     Z  2.42733206
## 27 2009-01-07     Z -3.28237631
## 28 2009-01-08     Z  2.20251176
## 29 2009-01-09     Z -3.78869543
## 30 2009-01-10     Z  4.84252572</code></pre>
<pre class="r"><code>stocksm %&gt;% spread(stock, price)</code></pre>
<pre><code>##          time          X           Y          Z
## 1  2009-01-01 -0.4231908 -1.73158045 -0.8833931
## 2  2009-01-02 -2.0057770 -1.48372159  6.9398273
## 3  2009-01-03  0.7254124 -2.63763031 -1.3333389
## 4  2009-01-04  0.6735256  3.63508177 -6.5230641
## 5  2009-01-05  1.0295169 -1.80531040 -2.6559102
## 6  2009-01-06  0.1751992  2.56019637  2.4273321
## 7  2009-01-07 -0.7310418 -1.29824900 -3.2823763
## 8  2009-01-08  1.0844626 -0.01699599  2.2025118
## 9  2009-01-09  1.1826379  0.33536337 -3.7886954
## 10 2009-01-10 -1.4777118  2.51063250  4.8425257</code></pre>
<pre class="r"><code>stocksm %&gt;% spread(time, price)</code></pre>
<pre><code>##   stock 2009-01-01 2009-01-02 2009-01-03 2009-01-04 2009-01-05 2009-01-06
## 1     X -0.4231908  -2.005777  0.7254124  0.6735256   1.029517  0.1751992
## 2     Y -1.7315804  -1.483722 -2.6376303  3.6350818  -1.805310  2.5601964
## 3     Z -0.8833931   6.939827 -1.3333389 -6.5230641  -2.655910  2.4273321
##   2009-01-07  2009-01-08 2009-01-09 2009-01-10
## 1 -0.7310418  1.08446260  1.1826379  -1.477712
## 2 -1.2982490 -0.01699599  0.3353634   2.510633
## 3 -3.2823763  2.20251176 -3.7886954   4.842526</code></pre>
