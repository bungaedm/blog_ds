\[DataCamp\]Working with Data in the Tidyverse
================
2020-05-05T06:49:14-05:00

``` r
library(dplyr)
```

    ## 
    ## Attaching package: 'dplyr'

    ## The following objects are masked from 'package:stats':
    ## 
    ##     filter, lag

    ## The following objects are masked from 'package:base':
    ## 
    ##     intersect, setdiff, setequal, union

``` r
library(skimr)
```

    ## Warning: package 'skimr' was built under R version 3.6.3

``` r
library(readr)
library(janitor)
```

    ## Warning: package 'janitor' was built under R version 3.6.3

    ## 
    ## Attaching package: 'janitor'

    ## The following objects are masked from 'package:stats':
    ## 
    ##     chisq.test, fisher.test

``` r
library(tidyr)

by_vs_am <- mtcars %>% group_by(vs, am)
by_vs <- by_vs_am %>% summarise(n = n())
by_vs
```

    ## # A tibble: 4 x 3
    ## # Groups:   vs [2]
    ##      vs    am     n
    ##   <dbl> <dbl> <int>
    ## 1     0     0    12
    ## 2     0     1     6
    ## 3     1     0     7
    ## 4     1     1     7

``` r
by_vs %>% summarise(n = sum(n))
```

    ## # A tibble: 2 x 2
    ##      vs     n
    ##   <dbl> <int>
    ## 1     0    18
    ## 2     1    14

``` r
by_vs %>%
  ungroup() %>%
  summarise(n = sum(n))
```

    ## # A tibble: 1 x 1
    ##       n
    ##   <int>
    ## 1    32

``` r
by_vs %>%
  ungroup()
```

    ## # A tibble: 4 x 3
    ##      vs    am     n
    ##   <dbl> <dbl> <int>
    ## 1     0     0    12
    ## 2     0     1     6
    ## 3     1     0     7
    ## 4     1     1     7

``` r
by_vs
```

    ## # A tibble: 4 x 3
    ## # Groups:   vs [2]
    ##      vs    am     n
    ##   <dbl> <dbl> <int>
    ## 1     0     0    12
    ## 2     0     1     6
    ## 3     1     0     7
    ## 4     1     1     7

``` r
stocks <- data.frame(
  time = as.Date('2009-01-01') + 0:9,
  X = rnorm(10, 0, 1),
  Y = rnorm(10, 0, 2),
  Z = rnorm(10, 0, 4)
)
stocks
```

    ##          time           X          Y           Z
    ## 1  2009-01-01  1.23563718  2.0915124 -8.86652548
    ## 2  2009-01-02  0.70574176  0.4671934  5.80751985
    ## 3  2009-01-03 -0.34789932  0.7796740  0.89558255
    ## 4  2009-01-04 -0.61507477  1.7685010 -2.28752276
    ## 5  2009-01-05 -0.48212096  1.3745498 -1.93063331
    ## 6  2009-01-06 -0.04614715 -2.3368976  5.00022388
    ## 7  2009-01-07 -0.07429543 -0.9355395  5.72847280
    ## 8  2009-01-08 -1.07264895 -1.2313431 -3.35272222
    ## 9  2009-01-09 -0.25635543  3.8924976 -7.00481828
    ## 10 2009-01-10  0.37462419  3.3744546 -0.01387572

``` r
stocksm <- stocks %>% gather(stock, price, -time)
stocksm
```

    ##          time stock       price
    ## 1  2009-01-01     X  1.23563718
    ## 2  2009-01-02     X  0.70574176
    ## 3  2009-01-03     X -0.34789932
    ## 4  2009-01-04     X -0.61507477
    ## 5  2009-01-05     X -0.48212096
    ## 6  2009-01-06     X -0.04614715
    ## 7  2009-01-07     X -0.07429543
    ## 8  2009-01-08     X -1.07264895
    ## 9  2009-01-09     X -0.25635543
    ## 10 2009-01-10     X  0.37462419
    ## 11 2009-01-01     Y  2.09151245
    ## 12 2009-01-02     Y  0.46719344
    ## 13 2009-01-03     Y  0.77967396
    ## 14 2009-01-04     Y  1.76850098
    ## 15 2009-01-05     Y  1.37454975
    ## 16 2009-01-06     Y -2.33689756
    ## 17 2009-01-07     Y -0.93553951
    ## 18 2009-01-08     Y -1.23134311
    ## 19 2009-01-09     Y  3.89249761
    ## 20 2009-01-10     Y  3.37445460
    ## 21 2009-01-01     Z -8.86652548
    ## 22 2009-01-02     Z  5.80751985
    ## 23 2009-01-03     Z  0.89558255
    ## 24 2009-01-04     Z -2.28752276
    ## 25 2009-01-05     Z -1.93063331
    ## 26 2009-01-06     Z  5.00022388
    ## 27 2009-01-07     Z  5.72847280
    ## 28 2009-01-08     Z -3.35272222
    ## 29 2009-01-09     Z -7.00481828
    ## 30 2009-01-10     Z -0.01387572

``` r
stocksm %>% spread(stock, price)
```

    ##          time           X          Y           Z
    ## 1  2009-01-01  1.23563718  2.0915124 -8.86652548
    ## 2  2009-01-02  0.70574176  0.4671934  5.80751985
    ## 3  2009-01-03 -0.34789932  0.7796740  0.89558255
    ## 4  2009-01-04 -0.61507477  1.7685010 -2.28752276
    ## 5  2009-01-05 -0.48212096  1.3745498 -1.93063331
    ## 6  2009-01-06 -0.04614715 -2.3368976  5.00022388
    ## 7  2009-01-07 -0.07429543 -0.9355395  5.72847280
    ## 8  2009-01-08 -1.07264895 -1.2313431 -3.35272222
    ## 9  2009-01-09 -0.25635543  3.8924976 -7.00481828
    ## 10 2009-01-10  0.37462419  3.3744546 -0.01387572

``` r
stocksm %>% spread(time, price)
```

    ##   stock 2009-01-01 2009-01-02 2009-01-03 2009-01-04 2009-01-05  2009-01-06
    ## 1     X   1.235637  0.7057418 -0.3478993 -0.6150748  -0.482121 -0.04614715
    ## 2     Y   2.091512  0.4671934  0.7796740  1.7685010   1.374550 -2.33689756
    ## 3     Z  -8.866525  5.8075199  0.8955826 -2.2875228  -1.930633  5.00022388
    ##    2009-01-07 2009-01-08 2009-01-09  2009-01-10
    ## 1 -0.07429543  -1.072649 -0.2563554  0.37462419
    ## 2 -0.93553951  -1.231343  3.8924976  3.37445460
    ## 3  5.72847280  -3.352722 -7.0048183 -0.01387572
